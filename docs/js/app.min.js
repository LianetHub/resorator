(()=>{"use strict";"undefined"!=typeof Fancybox&&null!==Fancybox&&Fancybox.bind("[data-fancybox]",{dragToClose:!1,closeButton:!1}),$((function(){function e(e){if(!e.id)return e.text;var t=$(e.element).attr("data-img-src");return t?$('<span><img src="'+t+'" class="img-flag" /> '+e.text+"</span>"):e.text}if($(document).on("click",(function(e){let t=$(e.target);t.hasClass("search-btn-toggler")&&(t.toggleClass("active"),$(".header__search").toggleClass("search_visible")),t[0].closest(".menu-toggler")&&($(".header").toggleClass("open-menu"),$("body").toggleClass("lock-menu")),t.hasClass("menu__arrow")&&(t.toggleClass("active"),t.next().slideToggle()),t.hasClass("product-card__info-more")&&(t.toggleClass("active"),t.prev().toggleClass("full"),t.hasClass("active")?t.text("Свернуть"):t.text("Развернуть храктеристики")),t.hasClass("product-card__desc-more")&&(t.toggleClass("active"),t.next().slideToggle(),t.hasClass("active")?t.text("Свернуть"):t.text("Развернуть описание")),t.hasClass("catalog__filters-spoller")&&(t.toggleClass("active"),t.next().slideToggle())})),$("#language-form").on("submit",(function(e){e.preventDefault(),$(".header__language").text($("#language-select").val()),Fancybox.getInstance().close()})),$("#location-form").on("submit",(function(e){e.preventDefault(),$(".header__location").text($("#location-select option:selected").text()),Fancybox.getInstance().close()})),$("select").each((function(){var t=$(this),a=void 0!==t.data("search");t.select2({templateResult:e,templateSelection:e,minimumResultsForSearch:a?0:1/0}),t[0].hasAttribute("data-list-mobile")&&function(e){var t=$("<div>",{class:"custom-select-container"}),a=$("<ul>",{id:"custom-select-"+e.attr("id")});function i(){$(window).width()<576?(a.empty(),t.show(),e.hide(),e.find("option").each((function(){var t=$(this).data("img-src"),i=$(this).text(),n=$(this).val(),s=$("<li>").attr("data-value",n).html('<img src="'+t+'" class="img-flag" /> '+i);s.on("click",(function(){e.val(n).trigger("change")})),a.append(s)}))):(t.hide(),e.show())}t.append(a),e.after(t),i(),$(window).one("resize",(function(){i()}))}(t)})),$("[data-tooltip]").on("mouseenter",(function(){var e=$(this),t=e.attr("title");e.data("title",t).removeAttr("title");var a=$('<div class="tooltip"></div>').text(t);$("body").append(a);var i=e.offset(),n=a.outerWidth(),s=a.outerHeight(),o=e.outerWidth(),l=e.outerHeight(),r=i.top+l+5,d=i.left+o/2-n/2;r+s>$(window).scrollTop()+$(window).height()?(r=i.top-s-5,a.addClass("open-top")):a.addClass("open-bottom"),d<0?d=0:d+n>$(window).width()&&(d=$(window).width()-n),a.css({top:r,left:d})})).on("mouseleave",(function(){$(".tooltip").remove();var e=$(this),t=e.data("title");e.attr("title",t)})),$(".companies__slider").length>0&&$(".companies__slider").each((function(e,t){new Swiper(t,{slidesPerView:"auto",spaceBetween:30,loop:!0,speed:1e4,autoplay:{delay:1,stopOnLastSlide:!1}})})),$(".promo__slider").length>0&&new Swiper(".promo__slider",{slidesPerView:1,speed:800,effect:"fade",loop:!0,autoplay:{delay:8e3,stopOnLastSlide:!1},fadeEffect:{crossFade:!0},pagination:{el:".promo__pagination",clickable:!0},on:{init:e=>{let t=e.params.speed,a=e.params.autoplay.delay;$(e.pagination.el).css("--counting-speed",t+a+"ms")}}}),$(".product__labels").length>0&&$(".product__labels").each((function(e,t){new Swiper(t,{slidesPerView:"auto",speed:800,grabCursor:!0,spaceBetween:10})})),$(".product-card__slider").length>0){let e=new Swiper(".product-card__thumbs",{slidesPerView:3,spaceBetween:20});new Swiper(".product-card__slider-main",{slidesPerView:1,pagination:{el:".product-card__slider-pagination",clickable:!0},thumbs:{swiper:e}})}$(".product-card__products").length>0&&$(".product-card__products").each((function(e,t){let a=$(t).find(".product-card__items"),i=$(t).find(".product-card__prev"),n=$(t).find(".product-card__next"),s=$(t).find(".product-card__pagination");new Swiper(a[0],{slidesPerView:6,spaceBetween:20,pagination:{el:s[0],type:"fraction",renderFraction:function(e,t){return`Страница <span class="${e}"></span> из <span class="${t}"></span>`}},navigation:{nextEl:n[0],prevEl:i[0]},breakpoints:{1199.98:{slidesPerView:4},1399.98:{slidesPerView:6}}})}));var t=document.querySelectorAll('input[type="tel"]'),a=function(e){return e.value.replace(/\D/g,"")},i=function(e){var t=e.target,i=a(t),n=e.clipboardData||window.clipboardData;if(n){var s=n.getData("Text");if(/\D/g.test(s))return void(t.value=i)}},n=function(e){var t=e.target,i=a(t),n=t.selectionStart,s="";if(!i)return t.value="";if(t.value.length==n){if(["7","8","9"].indexOf(i[0])>-1){"9"==i[0]&&(i="7"+i);var o="8"==i[0]?"8":"+7";s=t.value=o+" ",i.length>1&&(s+="("+i.substring(1,4)),i.length>=5&&(s+=") "+i.substring(4,7)),i.length>=8&&(s+="-"+i.substring(7,9)),i.length>=10&&(s+="-"+i.substring(9,11))}else s="+"+i.substring(0,16);t.value=s}else e.data&&/\D/g.test(e.data)&&(t.value=i)},s=function(e){var t=e.target.value.replace(/\D/g,"");8==e.keyCode&&1==t.length&&(e.target.value="")};for(var o of t)o.addEventListener("keydown",s),o.addEventListener("input",n,!1),o.addEventListener("paste",i,!1);$('input[name="push"]').on("input",(function(){this.value=this.value.replace(/\D/g,"")})),$.validator.addMethod("phoneRU",(function(e,t){return this.optional(t)||/^(8|\+7) \(\d{3}\) \d{3}-\d{2}-\d{2}$/.test(e)}),""),$("[data-validation-form]").length>0&&($("[data-validation-form]").each((function(){$(this).validate({rules:{email:{required:!0,email:!0},phone:{required:!0,phoneRU:!0},push:{required:!0,minlength:4,maxlength:4,digits:!0}},messages:{email:{required:"Это поле необходимо заполнить.",email:"Пожалуйста, введите корректный адрес электронной почты."},phone:{required:"Это поле необходимо заполнить."},push:{required:"Это поле необходимо заполнить.",minlength:"Код должен содержать 4 цифры.",maxlength:"Код должен содержать 4 цифры.",digits:"Пожалуйста, введите только цифры."}},showErrors:function(e,t){this.defaultShowErrors(),$.each(t,(function(e,t){"phoneRU"===t.method&&$(t.element).next("label.error").addClass("hidden")})),$.each(this.currentElements,(function(e,t){$(t).hasClass("error")&&"phone"===$(t).attr("name")&&""===$(t).val()&&$(t).next("label.error").removeClass("hidden")}))}})})),$("[data-validation-form] input, [data-validation-form] select, [data-validation-form] textarea").on("keyup change",(function(){var e;(e=$(this).closest("form")).valid()?e.find("button[type='submit']").removeAttr("disabled"):e.find("button[type='submit']").attr("disabled","disabled")})))}))})();