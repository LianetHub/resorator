(()=>{"use strict";"undefined"!=typeof Fancybox&&null!==Fancybox&&Fancybox.bind("[data-fancybox]",{dragToClose:!1,closeButton:!1}),$((function(){if($(document).on("click",(function(e){let t=$(e.target);if(t[0].closest(".menu-toggler")&&($(".header").toggleClass("open-menu"),$("body").toggleClass("lock-menu")),t.hasClass("menu__arrow")&&(t.toggleClass("active"),t.next().slideToggle()),t.hasClass("product-card__info-more")&&(t.toggleClass("active"),t.prev().toggleClass("full"),t.hasClass("active")?t.text("Свернуть"):t.text("Развернуть характеристики")),t.hasClass("product-card__desc-more")&&(t.toggleClass("active"),t.next().slideToggle(),t.hasClass("active")?t.text("Свернуть"):t.text("Развернуть описание")),t.hasClass("catalog__filters-spoller")&&(t.toggleClass("active"),t.next().slideToggle()),t.hasClass("btn-all-products")){t.toggleClass("active");let e=t.closest(".product-card__products");t.hasClass("active")?t.find("span").text("Свернуть"):(t.find("span").text("Развернуть"),$("html, body").animate({scrollTop:t.closest(".product-card__products").offset().top-20},0)),function(e){let t=e.find(".product-card__contorls"),a=e.find(".product-card__items"),i=s.find((e=>e.slider===a[0]));if(i)if(i.swiper.destroyed){console.log("Re-initializing Swiper"),t.removeClass("hidden"),a.removeClass("destroyed");let s=e.find(".product-card__prev"),r=e.find(".product-card__next"),n=e.find(".product-card__pagination");i.swiper=new Swiper(a[0],{slidesPerView:2,spaceBetween:20,pagination:{el:n[0],type:"fraction",renderFraction:function(e,t){return`Страница <span class="${e}"></span> из <span class="${t}"></span>`}},navigation:{nextEl:r[0],prevEl:s[0]},breakpoints:{767.98:{slidesPerView:3},991.98:{slidesPerView:4},1399.98:{slidesPerView:6}}})}else console.log("Destroying Swiper"),t.addClass("hidden"),a.addClass("destroyed"),i.swiper.destroy(!0,!0)}(e)}if(t.hasClass("catalog__filters-more")&&(t.toggleClass("active"),t.prev().slideToggle(),t.hasClass("active")?t.find("span").text("Скрыть все"):t.find("span").text("Показать все")),t.hasClass("catalog-filter-btn")&&($(".catalog__sidebar").toggleClass("visible"),$("body").toggleClass("lock-catalog-filter")),t.hasClass("about__services-caption")&&(t.toggleClass("active"),t.next().slideToggle()),t.hasClass("product-card__filters-more")&&(t.toggleClass("active"),t.prev().toggleClass("active")),t.hasClass("product-card__filter")){t.addClass("active").siblings().removeClass("active");let e=t.closest(".product-card__products"),a=t.data("filter");a&&function(e,t){let a=e.find(".product-card__items");a[0].swiper.slides.forEach((e=>{$(e).removeClass("filter-slide-active"),$(e).hasClass(t)&&$(e).addClass("filter-slide-active")})),a[0].swiper.update()}(e,a),t.parent().removeClass("active").next().removeClass("active")}if(t.hasClass("product-card__cart")||t.hasClass("product__cart")){let e=t.next();t.addClass("hidden"),e.removeClass("hidden"),e.find(".quantity-block__input").val(1)}if(t.hasClass("quantity-block__down")){let e=t.siblings(".quantity-block__input"),a=parseInt(e.val(),10);if(a>0&&(e.val(a-1),a-1==0)){let e=t.parent().parent();e.addClass("hidden"),e.prev().removeClass("hidden")}}if(t.hasClass("quantity-block__up")){let e=t.siblings(".quantity-block__input"),a=parseInt(e.val(),10);e.val(a+1)}if(t.hasClass("product-card__info-color")&&($(".product-card__side-main").addClass("hidden"),$(".product-card__footer").addClass("hidden"),$(".product-card__colors").removeClass("hidden"),$(".product-card__save-colors").removeClass("hidden"),$(".product-card__sizes").addClass("hidden"),$(".product-card__save-sizes").addClass("hidden")),t.hasClass("product-card__info-size")&&($(".product-card__side-main").addClass("hidden"),$(".product-card__footer").addClass("hidden"),$(".product-card__colors").addClass("hidden"),$(".product-card__save-colors").addClass("hidden"),$(".product-card__sizes").removeClass("hidden"),$(".product-card__save-sizes").removeClass("hidden")),(t.hasClass("product-card__save-colors")||t.hasClass("product-card__back")||t.hasClass("product-card__save-sizes"))&&($(".product-card__side-main").removeClass("hidden"),$(".product-card__footer").removeClass("hidden"),$(".product-card__colors").addClass("hidden"),$(".product-card__save-colors").addClass("hidden"),$(".product-card__sizes").addClass("hidden"),$(".product-card__save-sizes").addClass("hidden")),t.hasClass("delivery__accordion-btn")&&(t.toggleClass("active"),t.next().slideToggle()),t.closest(".goods__sidebar-link").length>0){e.preventDefault();let a=t.closest(".goods__sidebar-link");if(!a.hasClass("active")){let e=a.attr("href");$(".goods__sidebar-link").removeClass("active"),a.addClass("active"),$(".goods__category").removeClass("active"),$(e).addClass("active"),$(".goods__sidebar-categories").slideUp(),a.next(".goods__sidebar-categories").slideDown()}}})),$('[name="views"]').length>0&&$('[name="views"]').on("change",(function(e){let t=$(e.target);"rows"==t.val()&&t[0].checked?($(".catalog__grid").addClass("row-layout"),$(".brands__grid").addClass("hidden"),$(".brands__list").removeClass("hidden")):($(".catalog__grid").removeClass("row-layout"),$(".brands__list").addClass("hidden"),$(".brands__grid").removeClass("hidden"))})),$(".quantity-block__input").on("blur",(function(){let e=$(this);(parseInt(e.val(),10)<1||isNaN(parseInt(e.val(),10)))&&e.val(1)})),$('[name="alphabet"]').on("change",(function(e){e.target.checked?$(".brands__alphabet").removeClass("hidden"):$(".brands__alphabet").addClass("hidden")})),$(".product-card__side").length>0){function u(){var e=$(".product-card__side"),t=$(".product-card__info-list"),a=$(".product-card__content"),s=e.height()-(t.offset().top-a.offset().top);$(":root").css("--side-product-height",s+"px")}var e=new MutationObserver((function(e){e.forEach((function(e){u()}))})),t=document.querySelector(".product-card__side");e.observe(t,{attributes:!0,attributeFilter:["style"],subtree:!0}),u()}function a(e){if(!e.id)return e.text;var t=$(e.element).attr("data-img-src");return t?$('<span><img src="'+t+'" class="img-flag" /> '+e.text+"</span>"):e.text}if(Fancybox.show([{src:"#supplier-name"}],{dragToClose:!1,closeButton:!1}),$("#language-form").on("submit",(function(e){e.preventDefault(),$(".header__language").text($("#language-select").val()),Fancybox.getInstance().close()})),$("#location-form").on("submit",(function(e){e.preventDefault(),$(".header__location").text($("#location-select option:selected").text()),Fancybox.getInstance().close()})),$("select").each((function(){var e=$(this),t=void 0!==e.data("search");e.select2({templateResult:a,templateSelection:a,width:"100%",minimumResultsForSearch:t?0:1/0}),e[0].hasAttribute("data-list-mobile")&&function(e){var t=$("<div>",{class:"custom-select-container"}),a=$("<ul>",{id:"custom-select-"+e.attr("id")});t.append(a),e.after(t);var s=e.attr("name")+"-search",i=$('input[name="'+s+'"]');function r(t=""){a.empty(),e.find("option").each((function(){var s,i=$(this).text(),r=$(this).val(),n=$(this).data("img-src");i.toLowerCase().includes(t.toLowerCase())&&(s=n?$("<li>").attr("data-value",r).html('<img src="'+n+'" class="img-flag" /> '+i):$("<li>").attr("data-value",r).text(i),e.val()===r&&s.addClass("selected"),s.on("click",(function(){e.val(r).trigger("change"),a.find("li").removeClass("selected"),s.addClass("selected")})),a.append(s))}))}r(),$(window).on("resize",(function(){r()})),i.length>0&&i.on("input",(function(){r($(this).val().toLowerCase())}))}(e)})),$("[data-tooltip]").on("mouseenter",(function(){var e=$(this),t=e.attr("title");e.data("title",t).removeAttr("title");var a=$('<div class="tooltip"></div>').text(t);$("body").append(a);var s=e.offset(),i=a.outerWidth(),r=a.outerHeight(),n=e.outerWidth(),l=e.outerHeight(),o=s.top+l+5,d=s.left+n/2-i/2;o+r>$(window).scrollTop()+$(window).height()?(o=s.top-r-5,a.addClass("open-top")):a.addClass("open-bottom"),d<0?d=0:d+i>$(window).width()&&(d=$(window).width()-i),a.css({top:o,left:d})})).on("mouseleave",(function(){$(".tooltip").remove();var e=$(this),t=e.data("title");e.attr("title",t)})),$(".companies__slider").length>0&&$(".companies__slider").each((function(e,t){new Swiper(t,{slidesPerView:"auto",spaceBetween:30,loop:!0,speed:1e4,autoplay:{delay:1,stopOnLastSlide:!1}})})),$(".promo__slider").length>0&&new Swiper(".promo__slider",{slidesPerView:1,speed:800,effect:"fade",loop:!0,autoplay:{delay:8e3,stopOnLastSlide:!1},fadeEffect:{crossFade:!0},pagination:{el:".promo__pagination",clickable:!0},on:{init:e=>{let t=e.params.speed,a=e.params.autoplay.delay;$(e.pagination.el).css("--counting-speed",t+a+"ms")}}}),$(".product__labels").length>0&&$(".product__labels").each((function(e,t){new Swiper(t,{slidesPerView:"auto",speed:800,grabCursor:!0,spaceBetween:10})})),$(".product-card__slider").length>0){let p=new Swiper(".product-card__thumbs",{slidesPerView:3,spaceBetween:20,breakpoints:{575.98:{slidesPerView:3},767.98:{slidesPerView:2},991.98:{slidesPerView:3}}});new Swiper(".product-card__slider-main",{slidesPerView:1,pagination:{el:".product-card__slider-pagination",clickable:!0},thumbs:{swiper:p}})}let s=[];$(".product-card__products").length>0&&$(".product-card__products").each((function(e,t){let a=$(t).find(".product-card__items"),i=$(t).find(".product-card__prev"),r=$(t).find(".product-card__next"),n=$(t).find(".product-card__pagination"),l=new Swiper(a[0],{slidesPerView:1.45,spaceBetween:20,pagination:{el:n[0],type:"fraction",renderFraction:function(e,t){return`Страница <span class="${e}"></span> из <span class="${t}"></span>`}},navigation:{nextEl:r[0],prevEl:i[0]},breakpoints:{575.98:{slidesPerView:2},767.98:{slidesPerView:3},991.98:{slidesPerView:4},1399.98:{slidesPerView:6}}});s.push({slider:a[0],swiper:l})})),$(".about__navbar").length>0&&new Swiper(".about__navbar",{slidesPerView:"auto",spaceBetween:80}),$(".product-card__colors-slider").length>0&&new Swiper(".product-card__colors-slider",{slidesPerView:4,spaceBetween:20,watchOverflow:!0,pagination:{el:".product-card__colors-pagination",type:"fraction",renderFraction:function(e,t){return`Страница <span class="${e}"></span> из <span class="${t}"></span>`}},navigation:{nextEl:".product-card__colors-next",prevEl:".product-card__colors-prev"},grid:{fill:"column",rows:2},breakpoints:{575.98:{slidesPerView:6,grid:{fill:"column",rows:2}},767.98:{slidesPerView:4,grid:{fill:"column",rows:2}},991.98:{slidesPerView:5,grid:{fill:"column",rows:2}},1399.98:{slidesPerView:4,grid:{fill:"column",rows:2}}}});const i=$(".catalog__filters-price");i.length>0&&i.each((function(){const e=$(this).find(".catalog__filters-range")[0],t=$(this).find(".form__input_start"),a=$(this).find(".form__input_end"),s=[t,a],i=$(this).closest("form").find('button[type="reset"]');function r(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}function n(e){return parseInt(e.replace(/\s/g,""))}function l(e){const t=parseInt(e.attr("maxlength")),a=t-Math.floor((t-1)/4);e.attr("maxlength",a)}l(t),l(a),t.val(r(t.val())),a.val(r(a.val())),noUiSlider.create(e,{start:[n(t.val()),n(a.val())],connect:!0,step:1e3,range:{min:[parseInt(t.attr("min"))],max:[parseInt(a.attr("max"))||1e6]}}),e.noUiSlider.on("update",(function(e,t){s[t].val(r(Math.round(e[t])))})),e.noUiSlider.on("start",(function(e,t){s[t].addClass("active")})),$.each(s,(function(t,a){$(a).on("change",(function(a){((t,a)=>{let s=[null,null];s[t]=n(a),e.noUiSlider.set(s)})(t,$(this).val())}))})),$.each(s,(function(e,t){$(t).on("input",(function(e){let t=$(this).val();t=t.replace(/[^\d]/g,""),$(this).val(r(t)),$(this).addClass("active")}))})),i.length>0&&i.on("click",(function(){setTimeout((function(){t.val(r(t[0].defaultValue)),a.val(r(a[0].defaultValue)),e.noUiSlider.set([n(t[0].defaultValue),n(a[0].defaultValue)])}),0)}))}));var r=document.querySelectorAll('input[type="tel"]'),n=function(e){return e.value.replace(/\D/g,"")},l=function(e){var t=e.target,a=n(t),s=e.clipboardData||window.clipboardData;if(s){var i=s.getData("Text");if(/\D/g.test(i))return void(t.value=a)}},o=function(e){var t=e.target,a=n(t),s=t.selectionStart,i="";if(!a)return t.value="";if(t.value.length==s){if(["7","8","9"].indexOf(a[0])>-1){"9"==a[0]&&(a="7"+a);var r="8"==a[0]?"8":"+7";i=t.value=r+" ",a.length>1&&(i+="("+a.substring(1,4)),a.length>=5&&(i+=") "+a.substring(4,7)),a.length>=8&&(i+="-"+a.substring(7,9)),a.length>=10&&(i+="-"+a.substring(9,11))}else i="+"+a.substring(0,16);t.value=i}else e.data&&/\D/g.test(e.data)&&(t.value=a)},d=function(e){var t=e.target.value.replace(/\D/g,"");8==e.keyCode&&1==t.length&&(e.target.value="")};for(var c of r)c.addEventListener("keydown",d),c.addEventListener("input",o,!1),c.addEventListener("paste",l,!1);$('input[name="push"]').on("input",(function(){this.value=this.value.replace(/\D/g,"")})),$.validator.addMethod("phoneRU",(function(e,t){return this.optional(t)||/^(8|\+7) \(\d{3}\) \d{3}-\d{2}-\d{2}$/.test(e)}),""),$("[data-validation-form]").length>0&&($("[data-validation-form]").each((function(){$(this).validate({rules:{email:{required:!0,email:!0},phone:{required:!0,phoneRU:!0},push:{required:!0,minlength:4,maxlength:4,digits:!0}},messages:{email:{required:"Это поле необходимо заполнить.",email:"Пожалуйста, введите корректный адрес электронной почты."},phone:{required:"Это поле необходимо заполнить."},push:{required:"Это поле необходимо заполнить.",minlength:"Код должен содержать 4 цифры.",maxlength:"Код должен содержать 4 цифры.",digits:"Пожалуйста, введите только цифры."}},showErrors:function(e,t){this.defaultShowErrors(),$.each(t,(function(e,t){"phoneRU"===t.method&&$(t.element).next("label.error").addClass("hidden")})),$.each(this.currentElements,(function(e,t){$(t).hasClass("error")&&"phone"===$(t).attr("name")&&""===$(t).val()&&$(t).next("label.error").removeClass("hidden")}))}})})),$("[data-validation-form] input, [data-validation-form] select, [data-validation-form] textarea").on("keyup change",(function(){var e;(e=$(this).closest("form")).valid()?e.find("button[type='submit']").removeAttr("disabled"):e.find("button[type='submit']").attr("disabled","disabled")})))}))})();